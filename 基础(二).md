## 函数

lua中可以将函数作为参数传递给函数

```lua
function add(x, y)
    res = x + y
end

myprint = function(param)
    print("----这是打印函数\n##",param, "##")
end
myprint(10)
add(5, 5, myprint)


>>>>----这是打印函数
	##	10	##
```

lua的return可以返回多个值

```
function max(a)
    -- 最大值索引
    local mi = 1
    -- 最大值
    local m = a[mi]
    for i, val in ipairs(a) do
        if val > m then
            mi = i
            m = val
        end
    end
    return mi, m
end
print(max({3,55,34,99}))


>>>>4	99
```

lua可节后可变数目的参数，在函数列表中使用三个点...即可表示

```lua
function add1(...)
    local sum = 0
    -- {...}表示一个由所有变长参数构成的数组
    for i,v in ipairs{...} do
        sum = sum + v
    end
    return sum
end
print(add1(2,4,6,8,10))


>>>>30
```







## 循环

lua的循环方式有while、for、repeat...until、循环嵌套，循环控制语句有break、goto

false和nil为假，true和非nil为真，要注意的是lua中**0为true**

### pairs和ipairs的区别

pairs能遍历集合中的所有key,并且会跳过nil

ipairs仅遍历值，按照索引升序遍历，如果遇到nil则中断或者遇到不存在的key也会中断

```
table1 = {
    [1] = "value1",
    [2] = "value2",
    [6] = "value6",
    [3] = nil,
    [4] = "value4"
}
-- pairs能遍历集合中的所有key,并且会跳过nil
for k, v  in pairs(table1) do
    print(k .. " - " .. v)
end


>>>>:6 - value6
	 2 - value2
	 1 - value1
	 4 - value4
print("\n")

-- ipairs仅遍历值，按照索引升序遍历，如果遇到nil则中断或者遇到不存在的key也会中断
for k, v in ipairs(table1) do
    print(k .. " - " .. v)
end

>>>> 因为控制变量初始值按照升序遍历，当key=3时，值为nil，此时便停止了遍历
1 - value1
2 - value2

```

